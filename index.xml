<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ORDER CHAOS</title>
    <link>https://caechao.github.io/</link>
    <description>Recent content on ORDER CHAOS</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-US</language>
    <lastBuildDate>Sat, 11 Sep 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://caechao.github.io/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>影评:《The Matrix》</title>
      <link>https://caechao.github.io/posts/the-matrix-review/</link>
      <pubDate>Sat, 11 Sep 2021 00:00:00 +0000</pubDate>
      
      <guid>https://caechao.github.io/posts/the-matrix-review/</guid>
      <description>&lt;p&gt;最近有空看了会儿The Matrix，这曾是我最喜欢的电影系列之一。&lt;br&gt;
电影中有许多充满了哲学思辩对话，都曾引发了我的思考，让我对人生产生了新的理解和认知。据说电影制作之前，导演兼编剧:“龌龊司机兄弟”曾要求主演必须去读 &lt;em&gt;Simulacra and Simulation&lt;/em&gt;, &lt;em&gt;Out of Control&lt;/em&gt;，&lt;em&gt;Introducing Evolutionary Psychology&lt;/em&gt; 这三本书，以便能更好的理解Matrix要表达的哲学主题。&lt;/p&gt;
&lt;h3 id=&#34;关于机器与人&#34;&gt;关于机器与人：&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;Morpheus: Throughout human history, we have been dependent on machines to survive. Fate, it seems, is not without a sense of irony.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Neo and the Councillor walk out onto the engineering level.&lt;br&gt;
Councillor Hamann: Almost no one comes down here, unless, of course, there&amp;rsquo;s a problem. That&amp;rsquo;s how it is with people - nobody cares how it works as long as it works. I like it down here. I like to be reminded this city survives because of these machines. These machines are keeping us alive, while other machines are coming to kill us. Interesting, isn&amp;rsquo;t it? Power to give life, and the power to end it.&lt;br&gt;
Neo: We have the same power.&lt;br&gt;
Councillor Hamann: I suppose we do, but down here sometimes I think about all those people still plugged into the Matrix and when I look at these machines, I.. I can&amp;rsquo;t help thinking that in a way, we are plugged into them.
Neo: But we control these machines, they don&amp;rsquo;t control us.&lt;br&gt;
Councillor Hamann: Of course not, how could they? The idea&amp;rsquo;s pure nonsense, but&amp;hellip; it does make one wonder just&amp;hellip; what is control?&lt;br&gt;
Neo: If we wanted, we could shut these machines down.&lt;br&gt;
Councillor Hamann: Of course&amp;hellip; that&amp;rsquo;s it. You hit it! That&amp;rsquo;s control, isn&amp;rsquo;t it? If we wanted, we could smash them to bits. Although if we did, we&amp;rsquo;d have to consider what would happen to our lights, our heat, our air.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;现代社会，我们的生活根本无法离开机器，如今关闭电脑，没有电能是几乎不可想象的。回顾一下，不过十多年内的科技发展，现代人已经几乎无法脱离智能手机了:人们开始将越来越多的时间和精力投入到屏幕前，不禁感慨:现代生活究竟是人在使用计算机还是计算机在用人？你可以通过手机应用聊天、购物、玩游戏、读文章、吃喝玩乐&amp;hellip;新鲜事物的刺激和多巴胺奖励不断随机地出现在你的手机屏幕前，不停地吸引你的眼球。未来只要往每个人手机里塞满各类应用，人们也许就会像电影中的人类一样：脑子后面插了个管子，乐滋滋地为Matrix发电&amp;hellip;&lt;/p&gt;
&lt;h3 id=&#34;关于真相&#34;&gt;关于真相：&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;Morpheus: What is real? How do you define &amp;lsquo;real&amp;rsquo;? If you&amp;rsquo;re talking about what you can feel, what you can smell, what you can taste and see, then &amp;lsquo;real&amp;rsquo; is simply electrical signals interpreted by your brain.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;img src=&#34;https://caechao.github.io/images/matrix/what-is-real.jpg&#34; width=&#34;600&#34; style=&#34;margin:10px&#34;/&gt;
&lt;p&gt;你能看到的世界就是真实的吗？你目前能够“理解”的就是现实吗？你能接触到的环境，你每天呼吸的空气就代表着这个世界真实的运作方式吗？眼见有时也未必为实，比如魔术师就可以利用种种方法和技巧让你产生认知偏差。而电影中的Matrix正是利用了高科技手段，让陷在其中的人类产生了认知上的错觉：所有的感官和心理体验都是被模拟出来的，Matrix中的大部分人类能看到的“真实”也只是Matrix想让他们看到的。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Morpheus: I know exactly what you mean. Let me tell you why you&amp;rsquo;re here. You&amp;rsquo;re here because you know something. What you know you can&amp;rsquo;t explain, but you feel it. You&amp;rsquo;ve felt it your entire life, that there&amp;rsquo;s something wrong with the world. You don&amp;rsquo;t know what it is, but it&amp;rsquo;s there, like a splinter in your mind, driving you mad. It is this feeling that has brought you to me. Do you know what I&amp;rsquo;m talking about?&lt;br&gt;
Neo: The Matrix.&lt;br&gt;
Morpheus: Do you want to know…what it is?&lt;br&gt;
[Neo nods]&lt;br&gt;
Morpheus: The Matrix is everywhere. It is all around us. Even now, in this very room. You can see it when you look out your window or when you turn on your television. You can feel it when you go to work…when you go to church…when you pay your taxes. It is the world that has been pulled over your eyes to blind you from the truth.&lt;br&gt;
Neo: What truth?&lt;br&gt;
Morpheus: That you are a &lt;strong&gt;slave&lt;/strong&gt;, Neo. Like everyone else you were born into bondage. Born into a prison that you cannot smell or taste or touch. A prison for your mind.&lt;br&gt;
Morpheus: Unfortunately, no one can be…told what the Matrix is. You have to see it for yourself. [opens pillbox, empties contents into his palms, outstretches his hands] This is your last chance. After this, there is no turning back. You take the blue pill [opens his right hand revealing blue pill], the story ends, you wake up in your bed and believe whatever you want to believe. You take the red pill [opens his left hand revealing red pill], you stay in Wonderland, and I show you how deep the rabbit hole goes. [Neo, after a pause, reaches for the red pill] Remember: all I&amp;rsquo;m offering is the truth. Nothing more.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;img src=&#34;https://caechao.github.io/images/matrix/matrix-redpill.png&#34; width=&#34;600&#34; style=&#34;margin:10px&#34;/&gt;
&lt;p&gt;还是在读书的时候就能够感觉的到总有某种“不可抗拒”的力量在阻止我去了解我想要了解的知识与话题，但自己又没法用清晰和有条理的逻辑来解释。身边的大部分的人常常是习惯了种种社会惯常和集体的惯性来欺骗自己，然后便将这种不可避免地推而广之，生活周遭充满了对于生活真相的刻意避讳。也许大多数人宁可相信美丽的谎言，也不愿直面丑陋而残酷的真相。电影中，即使是努力追寻真相的Neo，在离开Matrix后，Morpheus第一次给他讲真相时，他都呕吐了。可见如果没有强大的内心，则很可能会对真相视而不见和回避。有的人知道真相后无法直面残酷的事实，生活的幻觉与假设破灭后则可能会陷入新的迷茫与痛苦。就像电影中叛变了的Cypher，在重返Matrix后与Agent Smith共进高贵晚餐时不由感慨：&lt;em&gt;Ignorance is bliss&lt;/em&gt;.&lt;/p&gt;
&lt;img src=&#34;https://caechao.github.io/images/matrix/ignorance-is-bliss.png&#34; width=&#34;500&#34; style=&#34;margin:10px&#34;/&gt;  
&lt;p&gt;也许追求真相的道路上孤独就是常态，因为即使你能够清醒，毫不犹豫的对自己开刀，却无法随意对拒绝思考、自我欺骗的人去批判。&lt;/p&gt;
&lt;h3 id=&#34;关于选择&#34;&gt;关于选择&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;Morpheus: I&amp;rsquo;m trying to free your mind, Neo. But I can only show you the door. You&amp;rsquo;re the one that has to walk through it.&lt;br&gt;
Morpheus: Neo, sooner or later you&amp;rsquo;re going to realize just as I did that there&amp;rsquo;s a difference between knowing the path and walking the path.　　&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;互联网是一个伟大的发明，知识和信息以前所未有的爆炸速度，以互联网为媒介而传播，这让普通人也有机会接触最先进的教育资源和方法，满足人对于知识的无限好奇心。不管你关注什么样的主题，都能通过互联网找到对应的书，网页，文章和问答。然而是否能真正为自己所用，让自己实现自我成长，摸索出适合自己的路，又取决于个人自身了。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The Oracle: Do you know what that means? It means know thy self.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;我们作出的每个选择都会给我们对事物和世界的看法带来影响，与不同的人和事物建立新的关联，而这些影响和关联又会继而影响到我们后续的选择。也许好的选择会让我们更加真实的了解自己，而糟糕的选择则会让我们的轨迹偏离生活的真相和真实的自己。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Neo: But if you already know, how can I make a choice?&lt;br&gt;
The Oracle: Because you didn&amp;rsquo;t come here to make the choice, you&amp;rsquo;ve already made it. You&amp;rsquo;re here to try to understand why you made it. I thought you&amp;rsquo;d have figured that out by now.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;img src=&#34;https://caechao.github.io/images/matrix/matrix-neo-oracle.png&#34; width=&#34;600&#34; style=&#34;margin:10px&#34;/&gt;
&lt;p&gt;在真正的抉择到来前，很多时候人也许早就在潜意识中作出了自己的选择。生活并不会告诉你选择的对与错，只是会让你理解自己作出选择的理由，调整自己，能让自己在选择的道路上走的更远。&lt;/p&gt;
&lt;h3 id=&#34;关于体制化&#34;&gt;关于体制化&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;Morpheus: The Matrix is a system, Neo. That system is our enemy. But when you&amp;rsquo;re inside, you look around, what do you see? Businessmen, teachers, lawyers, carpenters. The very minds of the people we are trying to save. But until we do, these people are still a part of that system and that makes them our enemy. You have to understand, most of these people are not ready to be unplugged. And many of them are so inured, so hopelessly dependent on the system, that they will fight to protect it.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在一个糟糕的体制环境中，绝大部分人会成为体制的顺从者，不合理的制度之所以能够延续就因为大部分人被体制化。他们一方面是体制的受害者，另一方面又很依赖于体制。这类人的比例越高，整个系统就会看上去越稳定。他们在依赖于体制，为体制辩护的同时，他们的自身利益却根本得不到保护。而他们的思考方式、个人价值观都很大程度受限于体制化而不自知。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>乐评:《The Wall》 -- Pink Floyd</title>
      <link>https://caechao.github.io/posts/the-wall/</link>
      <pubDate>Sun, 17 Nov 2019 00:00:00 +0000</pubDate>
      
      <guid>https://caechao.github.io/posts/the-wall/</guid>
      <description>&lt;h2 id=&#34;引子&#34;&gt;引子&lt;/h2&gt;
&lt;p&gt;当我在大学里初次听到Pink Floyd的《The Wall》这张专辑时，一种莫名的兴奋与激动不住地涌上心头：我几乎是没来由的便立马喜欢上了这张专辑的。就像我刚接触乔治奥威尔的作品便兴致盎然、一口气就能将其读完。那时正好还是大学时学英文的时期，很多歌词还不是太能听懂，只是音乐的魔力仿佛让大脑中某个沉睡已久的部分突然苏醒了一般。随着后续英文能力的提升，越是能理解歌词的意思，我便越发的沉迷，一度甚至听的自我带入到发狂。&lt;/p&gt;
&lt;h2 id=&#34;一切都从教育开始&#34;&gt;一切都从教育开始&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;高等教育的价值在于训练思维，而不在于传授事实。 &amp;ndash;爱因斯坦&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;专辑的曲目中尤其以《Another Brick In The Wall Part 2》能给听者在听觉和思想上带来最为直接的冲击:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;We don&amp;rsquo;t need no education.&lt;br&gt;
We don&amp;rsquo;t need no thought control.&lt;br&gt;
No dark sarcasm in the classroom.&lt;br&gt;
Teacher leave them kids alone.&lt;br&gt;
Hey! Teacher! Leave them kids alone!&lt;br&gt;
All in all it&amp;rsquo;s just another brick in the wall.&lt;br&gt;
All in all you&amp;rsquo;re just another brick in the wall.&lt;br&gt;
我们不要灌输式教育，&lt;br&gt;
我们不要思想被控制，&lt;br&gt;
我们不要教室里的嘲讽与挖苦，&lt;br&gt;
老师们请离天真可爱的孩子们远点！&lt;br&gt;
嗨！老师！让我们自己呆着！&lt;br&gt;
到最后这只是墙上的另一块砖，&lt;br&gt;
你只是墙上的另一块砖。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;请问这样的歌词怎么能让被失败的教育体制浪费过青春的人不产生共鸣呢？《Another Brick In the Wall Part 2》中童声合唱&amp;quot;We don&amp;rsquo;t need no education &amp;ldquo;即是对灌输式洗脑教育最为直接的控诉与谴责！考虑到这是一种double negative的句式，这其实又意味着另一层含义:“We [do] need education 我们需要真正的教育”。因为只有真正的教育才能让人开始思考，才能塑造个体。&lt;/p&gt;
&lt;img src=&#34;https://caechao.github.io/images/the-wall/another-brick-in-the-wall.jpg&#34; width=&#34;500&#34; style=&#34;margin:0&#34;/&gt;
&lt;p&gt;《The Wall》电影中的场景更是神似般的重现了我的教育经历，所有学生带着相同无表情的面具：就像是同一个模子里铸造出来，以统一的节奏和步伐走向一个绞肉机，不回头也不朝两边看。机器中有不停敲打的铁锤，仿佛学生们都是让这个生产线工作的能源推动力，经过机器后，所有的孩子们都被榨干了灵魂与肉体，从机器另一端出来后只剩下了一堆烂泥，一堆用来砌成墙上新砖的烂泥。&lt;/p&gt;
&lt;img src=&#34;https://caechao.github.io/images/the-wall/the-wall-machine.jpg&#34; width=&#34;500&#34; style=&#34;margin:0&#34;/&gt;
&lt;p&gt;在同名电影中不断出现的机器隐喻着体制：经过十多年的灌输式洗脑教育、对独立思考的摧残，我们的思想早已被禁锢，不会提出问题进行质疑。从小学开始便“树立权威，喊口号”：让你失去&lt;strong&gt;独立价值观&lt;/strong&gt;，中学用“标准答案”和“非黑即白”的思维方式摧毁你的批判性思维与个性，大学毁灭梦想，榨干灵魂。歌曲中的“老师”早已适应了思想的束缚，被体制化、迎合体制。他们如当权者所想的一样：不能容忍其他所谓“异端思想”的出现，并积极帮助当权者打击不同的声音，疯狂地复制出一批又一批现有体制的拥护者。歌词最后唱到：&amp;ldquo;All in all you are just another brick in the wall&amp;rdquo;，表明思想奴隶的改造已经完成，墙上又多了一块砖，墙也更加固化了。&lt;/p&gt;
&lt;p&gt;电影中该曲的后部分，孩子们扯掉了脸上的面具，砸毁了教室，甚至放火焚烧掉了如同牢笼一般的学校。年轻的勇者们撕掉了被迫戴上的思想面具，不仅仅是不屈服现状，更是勇于挑战权威的行动。然而镜头一转，才发现这些场景只不过是主角小男孩的意淫，就像我们曾经在课堂上常常幻想的一样&amp;hellip;现实仍旧是现实&lt;/p&gt;
&lt;p&gt;很有意思的是，人在对反抗进行幻想时常常会将自己想象成主角，那个能带来改变的英雄。然而在小Pink的幻想中，他貌似只是成为了一个观察者，观察着他的同学们为个体的独立而进行反抗，他却只能意淫。这也许说明小Pink内心的思想之墙已经如此之高，以至于他都不敢在他最大胆的想象中进行任何行动：他已经逐渐丧失了自我。&lt;/p&gt;
&lt;h2 id=&#34;个体与群体&#34;&gt;个体与群体&lt;/h2&gt;
&lt;p&gt;专辑中有一个可以很明显观察到的主题探讨：&lt;strong&gt;个体自由&lt;/strong&gt;与&lt;strong&gt;群体(或是集体)一致性&lt;/strong&gt;的冲突
这在《Another Brick In The Wall Part 2》、《In The Flesh》、《Waiting For The Worms》几首曲子可以特别明显的感受到对于这个主题的讨论。后两首曲子，则更像是再现了乔治奥威尔在1984中所描绘的场景。&lt;/p&gt;
&lt;p&gt;《Another Brick In The Wall Part 2》整首曲子其实都可以感受到这种矛盾(Ambiguity):一方面整首歌曲都在为个体的&lt;strong&gt;个性(individuality)&lt;strong&gt;呼吁和反抗，然而歌词和歌唱方式又呈现出非常明显的&lt;/strong&gt;一致性(conformity)&lt;/strong&gt;。因为如果是重塑个体，叙述的人称应该是&amp;quot;I&amp;rdquo;(我)，然而歌词中却找不到任何&amp;quot;I&amp;quot;的痕迹，而都是以&amp;quot;We&amp;quot;(我们)的形式出现。当在怀疑体制和反抗体制的同时，却又因为一致性而陷入了另一种形式的迷墙和隧道之中，我认为这也是此曲最为深刻和精彩之处。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;作为个体则意味着追求个性，个体自由。&lt;strong&gt;个体自由之中，最为重要的又莫过于&lt;/strong&gt;思想自由(&lt;a href=&#34;http://en.wikipedia.org/wiki/Intellectual_freedom&#34;&gt;Intellectual freedom&lt;/a&gt;)&lt;/strong&gt; ，因为没有思想的自由，就容易盲从他人的观点和价值取向。当与某一群体盲目的保持一致便意味着对现有集体价值观与规则的服从与认同，放弃自由的思考。若整个社会的大部分个体个性的缺失便会让整个群体呈现出&lt;strong&gt;单一化的价值和人生追求&lt;/strong&gt;，进一步导致整个社会的固步自封甚至是意识形态上与&lt;a href=&#34;https://en.wikipedia.org/wiki/Belief#Systems&#34;&gt;信念系统&lt;/a&gt;的一元化迷思，变成一个缺少宽容和思想多元化的社会。&lt;/p&gt;
&lt;h2 id=&#34;the-wall与柏林墙&#34;&gt;《The Wall》与柏林墙&lt;/h2&gt;
&lt;p&gt;30年前，就在Pink Floyd的《The Wall》这张专辑发布十年之后，柏林墙被推倒了。象征着野蛮，专制，集权的墙终于倒塌了。冷战结束，苏联解体，东欧转型，两德统一。东德人终于获得了他们梦寐以求的自由，全世界也见证了他们的勇气。&lt;/p&gt;
&lt;img src=&#34;https://caechao.github.io/images/the-wall/kennedy-berlin-wall.jpg&#34; width=&#34;500&#34; style=&#34;margin:0&#34;/&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;“自由有许多困难，民主亦非完美，然而我们从未建造一堵墙把我们的人民关在里面，不准他们离开。”&lt;/strong&gt; ——肯尼迪《柏林墙下的演说》，1963年6月25日于西德市政厅柏林墙前。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;柏林墙倒下的一年后，《The Wall》在柏林墙下的演出也自然成为了其最为经典的演绎之一，尤其是在演出末曲时全场观众高喊 &lt;strong&gt;&amp;ldquo;Tear down the wall !&amp;rdquo;&lt;/strong&gt;，现场的舞台上临时搭建的高墙伴随着人们的呐喊声被工作人员推倒时真可谓是把气氛推向了最高潮。人们的情绪仿佛就如那年柏林墙倒塌时一样：柏林墙人声鼎沸，情感潮流如洪水决堤，人们激动的相互拥抱接吻，举杯相庆，奏乐狂欢。&lt;/p&gt;
&lt;img src=&#34;https://caechao.github.io/images/the-wall/berlin-wall.jpg&#34; width=&#34;500&#34; style=&#34;margin:0&#34;/&gt;
&lt;img src=&#34;https://caechao.github.io/images/the-wall/berlin-wall-down.jpg&#34; width=&#34;500&#34; style=&#34;margin:0&#34;/&gt;
&lt;img src=&#34;https://caechao.github.io/images/the-wall/the_wall_live_in_berlin.jpg&#34; width=&#34;500&#34; style=&#34;margin:0&#34;/&gt;
&lt;h2 id=&#34;墙真的倒了吗&#34;&gt;墙真的倒了吗？&lt;/h2&gt;
&lt;p&gt;在《The Wall》的结尾：墙最后被推倒了，Pink解除了内心的高墙，专辑在祥和、充满希望的歌声中缓缓结束，与专辑开头的战争、混乱、恐惧、暴力与压迫的场景形成了鲜明的对比。但最后的&amp;quot;Isn&amp;rsquo;t this where&amp;hellip;&amp;ldquo;的戛然而止和开头的&amp;rdquo;&amp;hellip; we came in&amp;quot;连在一起来听，却仿佛形成了一个循环，意味深长，不禁令人深思。Pink Floyd像是有意想通过艺术的方式来启迪更多的人，将Pink的故事连接与推广到这世界上其他人的生命过程，给我们生活的这个世界带来希望和改变，但不知结尾意味着是有打破这个循环的可能还是意味着又回到了故事的开始，不过是另一个迷墙的继续？&lt;/p&gt;
&lt;p&gt;柏林墙见证了德国人的痛苦与悲剧，全世界也分享了他们的痛苦。所以在柏林墙拆除后，遗迹仍保留了下来，以提醒人们不要忘记&lt;strong&gt;历史的教训&lt;/strong&gt;。可这世界上类似的悲剧就这样结束了吗？
后来随着读得文字越多，了解的东西越多，才发现原来在远隔德国万里重洋的另外一个国家，依旧有一堵对付自己人民的墙巍峨耸立着。唯一的区别是：&lt;strong&gt;大多数人看不到甚至不知道有这堵墙的存在，更有甚者还以为这是保护自己的墙。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;那么墙最终会&amp;hellip;?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;参考链接&lt;/strong&gt;:&lt;br&gt;
&lt;a href=&#34;https://en.wikipedia.org/wiki/The_Wall&#34;&gt;The Wall迷墙&lt;/a&gt;
&lt;a href=&#34;https://en.wikipedia.org/wiki/Berlin_Wall&#34;&gt;Berlin Wall&lt;/a&gt;
&lt;a href=&#34;https://en.wikipedia.org/wiki/Ich_bin_ein_Berliner&#34;&gt;Ich bin ein Berliner:肯尼迪在柏林墙下的演说&lt;/a&gt;
&lt;a href=&#34;https://www.imdb.com/title/tt0244296/&#34;&gt;The Wall: Live in Berlin&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Asynchronous JavaScript Programming [2]</title>
      <link>https://caechao.github.io/posts/asynchronous-javascript-programming2/</link>
      <pubDate>Fri, 24 May 2019 00:00:00 +0000</pubDate>
      
      <guid>https://caechao.github.io/posts/asynchronous-javascript-programming2/</guid>
      <description>&lt;p&gt;In the last article, we introduced what is asynchronous programming and the concurrency model in JavaScript runtime. In this article, we will talk about the evolution of asynchronous JavaScript: from &lt;strong&gt;async callback&lt;/strong&gt; to &lt;strong&gt;Promise&lt;/strong&gt;, &lt;strong&gt;async await&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;asynchronous-callback&#34;&gt;Asynchronous Callback&lt;/h2&gt;
&lt;p&gt;The earliest solution to asynchronous programming might be &lt;strong&gt;asynchronous callback&lt;/strong&gt;(like setTimeout) which is a function that&amp;rsquo;s treated as a parameter when calling another &lt;strong&gt;higher order function&lt;/strong&gt; which will start to execute in the background. When that higher order function finishes running, it calls the callback function to let you know the job is done. But sometimes it has some problems.&lt;/p&gt;
&lt;h3 id=&#34;callback-hell&#34;&gt;Callback hell&lt;/h3&gt;
&lt;p&gt;When you have a series of tasks where each step depends on the results of the previous step. If it is synchronous code, then it will be pretty straightforward:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JavaScript&#34; data-lang=&#34;JavaScript&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;text&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;readFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fileName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;tokens&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;tokenize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;parseTree&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;parse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;tokens&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;optimizedTree&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;optimize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;parse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;output&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;evaluate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;optimizedTree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;But if you try to do these tasks in asynchronous code, which happens very often in Front-end with lots of Ajax requests and end-up looking like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JavaScript&#34; data-lang=&#34;JavaScript&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;readFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fileName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;tokenize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;tokens&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;parse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;tokens&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;parseTree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;optimize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;parseTree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;optimizedTree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;evaluate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;optimizedTree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;It&amp;rsquo;s called &lt;strong&gt;callback hell&lt;/strong&gt;, this may drive most people&amp;rsquo;s brain crazy just by a quick glimpse. Having a project end up with hundreds of similar code blocks will make it extremely hard to maintain the code even for the person who wrote it, and the &lt;strong&gt;DRY&lt;/strong&gt; principle apparently has no value here as well.&lt;/p&gt;
&lt;p&gt;That&amp;rsquo;s where &lt;strong&gt;Promise&lt;/strong&gt; come in.&lt;/p&gt;
&lt;h2 id=&#34;promise&#34;&gt;Promise&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Promise&lt;/strong&gt; is a new modern style of solution to async programming. Simply put, a Promise is a &lt;strong&gt;container&lt;/strong&gt; which stores an event(an asynchronous action) that may complete at some point in the future and produce a value, and that future value indicate a &lt;strong&gt;success&lt;/strong&gt; or &lt;strong&gt;failure&lt;/strong&gt;. You can imagine you order some food in a restaurant, and you&amp;rsquo;ll either get the food eventually(success), or you&amp;rsquo;ll get the bad news of food shortage(failure).&lt;/p&gt;
&lt;p&gt;When you initiate a &lt;strong&gt;Promise&lt;/strong&gt;, you can use &lt;strong&gt;.then&lt;/strong&gt; to pass two different callback handlers to &lt;strong&gt;fulfillment&lt;/strong&gt;(success) and &lt;strong&gt;rejection&lt;/strong&gt;(failure).&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JavaScript&#34; data-lang=&#34;JavaScript&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;promise&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;then&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// success
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// failure
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;or you can use &lt;code&gt;Promise.prototype.catch(onRejected)&lt;/code&gt; to deals with rejected error cases, which actually behaves the same as calling &lt;code&gt;Promise.prototype.then(undefined, onRejected)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Here are some features of &lt;strong&gt;Promise&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A Promise may be in one of 3 possible states: &lt;strong&gt;fulfilled&lt;/strong&gt;, &lt;strong&gt;rejected&lt;/strong&gt;, or &lt;strong&gt;pending&lt;/strong&gt;,&lt;/li&gt;
&lt;li&gt;Promise doesn&amp;rsquo;t expose states outside, instead, you&amp;rsquo;re expected to treat the promise as a black box&lt;/li&gt;
&lt;li&gt;Because &lt;strong&gt;.then()&lt;/strong&gt; will always return a new &lt;strong&gt;Promise&lt;/strong&gt;, you can chain multiple async operations together using multiple &lt;strong&gt;.then()&lt;/strong&gt; operations, passing the result of one into the next one as an input.&lt;/li&gt;
&lt;li&gt;Once a &lt;strong&gt;Promise&lt;/strong&gt; is &lt;strong&gt;resolved&lt;/strong&gt;, it becomes an immutable value, and it will trigger the callback function binding with &lt;strong&gt;.then()&lt;/strong&gt;. Therefore, it&amp;rsquo;s safe to pass that result because of the fact that it cannot be modified.&lt;/li&gt;
&lt;li&gt;It will start doing whatever task you give it as soon as the promise constructor is initiated immediately.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Why promise? As mentioned previously, if you have a series of asynchronous tasks where each step depends on the results of previous step, which often easily ends up with &lt;strong&gt;callback hell&lt;/strong&gt;. If we use &lt;strong&gt;Promise&lt;/strong&gt;, then we can synchronizing these asynchronous tasks, rather than writing nested callback functions. Even though this method does not remove the use of callbacks, it makes the chaining functions straightforward, making it much easier to read and write.&lt;/p&gt;
&lt;p&gt;Another good reason to use &lt;strong&gt;Promise&lt;/strong&gt; is that &lt;strong&gt;Promise&lt;/strong&gt; can be see as a &lt;strong&gt;trustable&lt;/strong&gt; and &lt;strong&gt;repeatable mechanism&lt;/strong&gt; for encapsulating and composing &lt;strong&gt;future values&lt;/strong&gt;, meanwhile, you don&amp;rsquo;t need to worry about the time aspect of it.&lt;/p&gt;
&lt;p&gt;If we refactor our callback hell codes above by using &lt;strong&gt;Promise&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JavaScript&#34; data-lang=&#34;JavaScript&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;readFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fileName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;then&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;tokenize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;then&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;tokens&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;parse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;tokens&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;then&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;parseTree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;optimize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;parseTree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;then&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;optimizedTree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;evaluate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;optimizedTree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;then&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Doesn&amp;rsquo;t it look much better to you as an sequence?&lt;/p&gt;
&lt;h2 id=&#34;generator&#34;&gt;Generator&lt;/h2&gt;
&lt;p&gt;However, we still have some drawbacks to use callbacks:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Async Callback doesn’t fit how our brain plans out steps of a task.&lt;/li&gt;
&lt;li&gt;Callback is not trustable or composable because of inversion of control.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If we want to express async flow in a sequential, synchronous-looking style, we need some other ways. That&amp;rsquo; where &lt;strong&gt;Generator&lt;/strong&gt; comes in.
&lt;strong&gt;Generator&lt;/strong&gt; functions are JavaScript functions that may yield multiple values before finally returning.
But we won&amp;rsquo;t discuss much about &lt;strong&gt;Generator&lt;/strong&gt; here, because we have a more modern solution: Async/Await.&lt;/p&gt;
&lt;h2 id=&#34;asyncawait&#34;&gt;Async/Await&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Async/Await&lt;/strong&gt; is basically a &lt;strong&gt;Syntactic Sugar&lt;/strong&gt; for &lt;strong&gt;Generator&lt;/strong&gt; function
If we refactor our html processing codes above to Async/Await, then it turns out like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JavaScript&#34; data-lang=&#34;JavaScript&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;asyncProcessor&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;async&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fileName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;text&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;await&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;readFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fileName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;tokens&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;await&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;tokenize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;parseTree&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;await&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;parse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;tokens&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;optimzedTree&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;await&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;optimize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;parseTree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;output&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;await&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;evaluate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;optimzedTree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;You can see &lt;strong&gt;async function&lt;/strong&gt; as a &lt;strong&gt;Promise&lt;/strong&gt; with multiple asynchronous operations, and see &lt;strong&gt;await&lt;/strong&gt; as a syntactic
sugar for &lt;strong&gt;.then()&lt;/strong&gt;. In fact, you can also chain &lt;strong&gt;.then()&lt;/strong&gt; right from the end of &lt;strong&gt;async&lt;/strong&gt; function:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JavaScript&#34; data-lang=&#34;JavaScript&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;asyncProcessor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;./filename.html&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;then&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;And sometimes it&amp;rsquo;s also a good practice to put a data process function into the Promise.then after it resolved and you can get the data from the asynchronous data query, otherwise, sometimes the web page will render the UI components or execute other UI actions before getting the real data that should be rendered because of the non-block event driven programming model in JavaScript.&lt;/p&gt;
&lt;p&gt;So now you can write async codes as if it were synchronous, but without blocking the main thread.&lt;/p&gt;
&lt;h2 id=&#34;single-threaded-brain&#34;&gt;Single threaded Brain&lt;/h2&gt;
&lt;p&gt;So why the async codes evolve this way? Why we have figured out all kinds of solutions to write asynchronous codes, but in the end it seems that we come back to the original style like a roundabout.&lt;/p&gt;
&lt;p&gt;I think a good answer to this is:
Humans are not as good at &lt;strong&gt;multitasking&lt;/strong&gt; as we think we are. That&amp;rsquo;s may just not really how our brains appear to be set up. We&amp;rsquo;d like to plan things in a synchronous order, rather then let the tasks to hang randomly and pop up like async events.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Asynchronous JavaScript Programming [1]</title>
      <link>https://caechao.github.io/posts/asynchronous-javascript-programming1/</link>
      <pubDate>Fri, 17 May 2019 00:00:00 +0000</pubDate>
      
      <guid>https://caechao.github.io/posts/asynchronous-javascript-programming1/</guid>
      <description>&lt;h2 id=&#34;introduction&#34;&gt;Introduction&lt;/h2&gt;
&lt;p&gt;What is asynchronous programming?
Well, imagine you are sitting in front of your computer screen, putting your hands on your beloved keyboard and doing your coding and thinking, and suddenly you realize that there is a piece of necessary information you need to ask your friend to finish your work, so you grab your phone nearby and send an asking message to your friend, and this might take him some time to respond.&lt;/p&gt;
&lt;p&gt;Now there are different ways for you to proceed:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;You stay on your phone and wait for his respond (&lt;strong&gt;Synchronous&lt;/strong&gt;)&lt;/li&gt;
&lt;li&gt;You tell your friend to send back that important information once he has that information. Meanwhile you can continue what tasks are you focusing on. (&lt;strong&gt;Asynchronous&lt;/strong&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The same principle applies to Computer:
The central part of the computer is the processor, which just like your brain, but it works all the time.
The programs are nothing but tasks that will keep the processor busy. But many programs not just interact with processors, they may also communicate with other computers over a network. (like sending messages to your friends)
So when a single program need to make progress while it is waiting for some data back from a network request, asynchronous behavior happens.&lt;/p&gt;
&lt;h2 id=&#34;how-does-it-work-in-javascript&#34;&gt;How does it work in JavaScript?&lt;/h2&gt;
&lt;p&gt;There are some basic components in JavaScript runtime to construct the JavaScript concurrency model.&lt;/p&gt;
&lt;h3 id=&#34;stack-and-execution-context&#34;&gt;Stack and Execution context&lt;/h3&gt;
&lt;p&gt;Because JavaScript is a Single-threaded language, JavaScript has a single execution stack which execute synchronously&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Stacks are fundamental to function calls, each time a function is called it forms a new &lt;em&gt;stack frame&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Each function call creates a new execution context, even a call to itself.&lt;/li&gt;
&lt;li&gt;1 Global context as the base of stack
&amp;hellip;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Because of these facts about stack, JavaScript will execute functions synchronously and a synchronous function blocks until it completes its operations, and behaves as LIFO (last in first out).&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JavaScript&#34; data-lang=&#34;JavaScript&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;taskA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;taskB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;taskC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;The&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;single&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;thread&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;Task&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Task&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Task&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;C&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;In JavaScript, the code inside taskA()(and taskB(), taskC()) is atomic, which means that once taskA() starts running, it cannot be interrupted and will finish before any code in taskB() can run.&lt;/p&gt;
&lt;h3 id=&#34;another-worker&#34;&gt;Another Worker&lt;/h3&gt;
&lt;p&gt;As I said before, JavaScript is generally a &lt;strong&gt;single-threaded synchronous&lt;/strong&gt; language, so how can JavaScript performs &lt;strong&gt;asynchronous actions&lt;/strong&gt;? Actually the asynchronous behavior is not part of the JavaScript language, rather they are built on host Environment like Browser or Nodejs, act like another worker or friend.
If you replace asynchronous actions with synchronous actions, the webpage will be unresponsive while the script is running, the user will not be able to do anything, because the UI is locked by that time delay task.
Here is how they work together:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JavaScript&#34; data-lang=&#34;JavaScript&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;taskA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;a&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;setTimeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;taskB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;500&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;taskB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;b&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;taskC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;c&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;taskA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;taskC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;JS&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Main&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Thread&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Task&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Task&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;C&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Worker&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Thread&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Task&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;B&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Have you noticed the taskB inside setTimeout function above? That is an asynchronous &lt;strong&gt;callback&lt;/strong&gt; function which is a function that performs a slow action. Just like a friend sends you a message back.&lt;/p&gt;
&lt;h2 id=&#34;message-queue&#34;&gt;Message Queue&lt;/h2&gt;
&lt;p&gt;JavaScript runtime uses a message queue to receive incoming events, which is a list of messages to be processed. Queue behaves as FIFO(First in First out)&lt;/p&gt;
&lt;h2 id=&#34;event-loop&#34;&gt;Event Loop&lt;/h2&gt;
&lt;p&gt;The event loop runs in the same thread your JavaScript code runs in&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JavaScript&#34; data-lang=&#34;JavaScript&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;queue&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;queue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;isEmpty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;event&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;queue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;shift&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;event&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Event loop always waits for a message to arrive, and will pop message(event) from the message queue to stack after JS main thread finishes the tasks.
Here is how event loop and message queue work together:
&lt;img src=&#34;https://caechao.github.io/images/javascript/js-concurrency-model.png&#34; alt=&#34;Js-concurrency-model&#34;&gt;&lt;/p&gt;
&lt;p&gt;Remember the setTimeout function above? Actually that function doesn&amp;rsquo;t put that callback function taskB on the event loop queue. What it really does is set up a timer; when the timer expires, the host environment will place your callback into message queue. But if you have already had a lot of items inside your event loop at that moments, say like 20&amp;hellip;then your new callback function must wait. That&amp;rsquo;s why sometimes your setTimeout timers may not triggers your function punctually.&lt;/p&gt;
&lt;p&gt;Because of this event loop model, it allows JavaScript runtime behaves concurrently and never blocking I/O operations&lt;/p&gt;
&lt;h2 id=&#34;summary&#34;&gt;Summary&lt;/h2&gt;
&lt;p&gt;So why asynchronous programming?
Most of time JavaScript is synchronous, blocking, single-threaded, in which only one operation can be in progress at a time.
But if we want to load some data from server side database like performing an Ajax querying and displaying the result, then it is better to push this off main JS thread and perform this task asynchronously.&lt;/p&gt;
&lt;p&gt;So this is my introduction to asynchronous JavaScript Programming, I&amp;rsquo;ll talk about some common problems involved in this model, and the evolution of asynchronous JavaSript from &lt;strong&gt;Callback&lt;/strong&gt; to &lt;strong&gt;Promise&lt;/strong&gt; to &lt;strong&gt;async await&lt;/strong&gt; in the next article.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>About</title>
      <link>https://caechao.github.io/about/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://caechao.github.io/about/</guid>
      <description>&lt;p&gt;Greetings,&lt;/p&gt;
&lt;p&gt;I started this site as a place for collecting knowledge and my thoughts, and as a way to share those things with others.&lt;/p&gt;
&lt;p&gt;You can find me on &lt;a href=&#34;&#34;&gt;X&lt;/a&gt; and &lt;a href=&#34;https://github.com/CaeChao&#34;&gt;GitHub&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Projects</title>
      <link>https://caechao.github.io/projects/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://caechao.github.io/projects/</guid>
      <description>&lt;p&gt;This is the home for my projects and collections.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>

